<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil del Administrador UCV</title>
     <link rel="icon" type="image/x-icon" href="img/favicon.ico">
    <!-- Se eliminó 'integrity' porque causaba advertencias por longitud o hash incorrecto -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
    <link rel="stylesheet" href="../Vista/css/admin-perfil.css">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
</head>
<body>
    <div class="menu">
    </div>
    <div class="barra-lateral">
        <div>
            <div class="nombre-pagina">
                <div class="admin-icon">
            <i class="bx bx-shield-quarter"></i>
                </div>
                <span id="cloud">Administrador</span>
            </div>
        </div>
        <nav class="navegacion">
            <ul>
                <li><a id="alertas" href="admin-main.html"> <i class='bx bx-bell'></i><span>Gestión de Alertas</span></a></li>
                <li><a id="historial" href="admin-historial.html">  <i class='bx bx-history'></i><span>Historial General</span></a></li>
                <li><a id="usuarios" href="admin-usuarios.html"><i class='bx bx-user'></i><span>Usuarios</span></a></li>
                <li><a id="perfil" href="admin-perfil.html" class="active"><i class='bx bx-id-card'></i><span>Perfil</span></a></li>
                
            </ul>
        </nav>
        <div class="cerrar-sesion-container">
            <a href="../Controlador/cerrarSesion.php">
                <i class='bx bx-log-out'></i>
                <span>Cerrar Sesión</span>
            </a>
        </div>
    </div>
    
    <main>
        <div class="container">
            <div class="card">
                <div class="card-body text-center">
                    <div class="profile-image-container">
                        <img id="fotoPerfilActual" src="" alt="Foto de perfil del administrador" class="profile-image img-thumbnail">
                    </div>
                    <h5 class="card-title">Información Personal</h5>
                    <p class="card-text"><strong>Nombre:</strong> <span id="nombre"></span></p>
                    <p class="card-text"><strong>Apellido:</strong> <span id="apellidos"></span></p>
                    <p class="card-text"><strong>Teléfono:</strong> <span id="telefono"></span></p>
                    <p class="card-text"><strong>Correo:</strong> <span id="correo"></span></p>
                    <p class="card-text"><strong>Carrera:</strong> <span id="carrera"></span></p>
                    <button class="btn btn-primary" id="editarPerfilBtn">Editar Perfil</button>
                </div>
            </div>

            <div id="editarPerfil" class="mt-4" style="display: none;">
                <h2>Editar Perfil</h2>
                <!--  Ruta corregida según el backend que realmente responde -->
                <form id="formEditarPerfil" action="../../Servidor/Controlador/cperfil.php" method="POST" enctype="multipart/form-data">
                    <!-- Campos como estaban antes (sin cambios innecesarios) -->
                    <div class="form-group mb-3">
                        <label for="fotoPerfil">Foto de Perfil</label>
                        <input type="file" class="form-control" id="fotoPerfil" name="fotoPerfil" accept="image/*">
                    </div>
                    <div class="form-group mb-3">
                        <label for="nombre">Nombre</label>
                        <input type="text" class="form-control" id="nombreEdit" name="nombre" placeholder="Ingrese su nombre" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="apellido_paterno">Apellido Paterno</label>
                        <input type="text" class="form-control" id="apellido_paternoEdit" name="apellido_paterno" placeholder="Ingrese su apellido paterno" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="apellido_materno">Apellido Materno</label>
                        <input type="text" class="form-control" id="apellido_maternoEdit" name="apellido_materno" placeholder="Ingrese su apellido materno" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="telefono">Teléfono</label>
                        <input type="tel" class="form-control" id="telefonoEdit" name="telefono" placeholder="Ingrese su teléfono" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="correo">Carrera</label>
                        <select class="form-control" id="carreraEdit" name="carrera" required>
                            <option value="" disabled selected>Seleccione su carrera</option>
                            <!-- Opciones de carrera -->
                            <optgroup label="Facultad de Ingeniería y Arquitectura">
                                <option value="Arquitectura">Arquitectura</option>
                                <option value="Ingeniería Empresarial">Ingeniería Empresarial</option>
                                <option value="Ingeniería Agroindustrial">Ingeniería Agroindustrial</option>
                                <option value="Ingeniería Ambiental">Ingeniería Ambiental</option>
                                <option value="Ingeniería Civil">Ingeniería Civil</option>
                                <option value="Ingeniería de Ciberseguridad">Ingeniería de Ciberseguridad</option>
                                <option value="Ingeniería de Minas">Ingeniería de Minas</option>
                                <option value="Ingeniería de Sistemas">Ingeniería de Sistemas</option>
                                <option value="Ingeniería en Ciencia de Datos">Ingeniería en Ciencia de Datos</option>
                                <option value="Ingeniería Industrial">Ingeniería Industrial</option>
                                <option value="Ingeniería Mecánica Eléctrica">Ingeniería Mecánica Eléctrica</option>
                            </optgroup>
                            <optgroup label="Facultad de Ciencias de la Salud">
                                <option value="Enfermería">Enfermería</option>
                                <option value="Estomatología">Estomatología</option>
                                <option value="Medicina">Medicina</option>
                                <option value="Nutrición">Nutrición</option>
                                <option value="Psicología">Psicología</option>
                                <option value="Tecnología Médica en Laboratorio Clínico y Anatomía Patológica">Tecnología Médica en Laboratorio Clínico y Anatomía Patológica</option>
                            </optgroup>
                            <optgroup label="Facultad de Ciencias empresariales">
                                <option value="Administración de Empresas">Administración de Empresas</option>
                                <option value="Administración en Turismo y Hotelería">Administración en Turismo y Hotelería</option>
                                <option value="Administración y Gestión Pública">Administración y Gestión Pública</option>
                                <option value="Administración y Marketing">Administración y Marketing</option>
                                <option value="Administración y Negocios Internacionales">Administración y Negocios Internacionales</option>
                                <option value="Contabilidad">Contabilidad</option>
                                <option value="Economía">Economía</option>
                            </optgroup>
                            <optgroup label="Facultad de Derecho y Humanidades">
                                <option value="Arte y Diseño Gráfico Empresarial">Arte y Diseño Gráfico Empresarial</option>
                                <option value="Ciencias de la Comunicación">Ciencias de la Comunicación</option>
                                <option value="Ciencias del Deporte">Ciencias del Deporte</option>
                                <option value="Derecho">Derecho</option>
                                <option value="Educación Inicial">Educación Inicial</option>
                                <option value="Educación Primaria">Educación Primaria</option>
                                <option value="Traducción e Interpretación">Traducción e Interpretación</option>
                            </optgroup>
                        </select>
                    </div>
                    <div class="form-group mb-3">
                        <label for="clave">Contraseña</label>
                        <input type="password" class="form-control" id="clave" name="clave" placeholder="Ingrese su contraseña" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="confirmar_clave">Confirmar Contraseña</label>
                        <input type="password" class="form-control" id="confirmar_clave" name="confirmar_clave" placeholder="Confirme su contraseña" required>
                    </div>
                    <button type="submit" class="btn btn-success" id="guardarCambios">Guardar cambios</button>
                    <button type="button" class="btn btn-secondary" id="cancelarEdicion">Cancelar</button>
                </form>
            </div>
        </div>
    </main>

    <!-- Modal de éxito -->
    <div class="modal fade" id="modalExito" tabindex="-1" aria-labelledby="modalExitoLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalExitoLabel">Éxito</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body"><p>Los cambios se guardaron correctamente.</p></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Aceptar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de error -->
    <div class="modal fade" id="modalError" tabindex="-1" aria-labelledby="modalErrorLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalErrorLabel">Error</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body"><p id="mensajeError">Hubo un error al editar el perfil.</p></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Se eliminaron integridades inválidas -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script src="../Vista/js/admin-perfil.js"></script>
</body>
</html>
